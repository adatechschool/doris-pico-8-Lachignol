pico-8 cartridge // http://www.pico-8.com
version 38
__lua__
--jeux-pico8


function _init()
create_player()
projectile={}

end
 
function _update()
player_movement()
update_projectile()
end
	
function _draw()
--clear interface
cls()
--draw map on "left" corner
map(0,0,0,0)
--draw sprit number 1 at xy point
affichage_perso()

for proj in all(projectile) do 
spr(69,proj.x,proj.y)
end
-- coin superieur g. camera
cam_x=0
cam_y=0
end



-->8
--map

function check_flag(flag,x,y)
--recuperer flag sur la position
sprite=mget(x,y)
print(fget(sprite,0))
return fget(sprite,0)
end
-->8
--player



function create_player()
--on donne la position du sprite au depart
--puis la numero de sprite
perso={x=5,y=5,sprite=61}
end

function player_movement()
neox=perso.x
neoy=perso.y

	if (btn(➡️)) neox+=1
	if (btn(⬅️)) neox-=1
	if (btn(⬆️)) neoy-=1
	if (btn(⬇️)) neoy+=1
	if (btn(❎)) tir()
	
	

--condition si check-flag 
--renvoi true donc 0	
	if check_flag(0,neox,neoy)
	then --on avance pas 
	else --si pas de flag on avance
	perso.x=mid(0,neox,127)
	perso.y=mid(0,neoy,63)
	--la commande mid fait qu'une fois les intervalles depasser on revien a la valeur du milieu)
	end
	end
	
	function affichage_perso()
	--on cherche a faire avancer le sprite d'une case de 8px par une case
	spr(perso.sprite,perso.x*8,perso.y*8)
	end
-->8
--config projectile
function tir()
local new_projectile={
neox=perso.x,
neoy=perso.y,
speed=4
}
add(projectile,new_projectile)

end

function update_projectile()
for proj in all(projectile) do
proj.neoy-=proj.speed
if (proj.neoy<-8) del(projectile,proj)
end
end


__gfx__
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555444444444444444444444444
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555444444444444444444444444
00700700555555555555555555555555555555555555555555555555555555555555555555566055555555555555555555555555440000000000000000000044
00077000555555555566055555555555555555555560555555555555555555555555555555555605555555555556605555555555440555555555555555555544
00077000555555555655605555555555555555555656055555555555555555555555555555555555555555555565560555555555440555555555555555555544
00700700555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555440556055555555555555544
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555440565605555555555555544
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555440555555555555555555544
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555440555550000000055555544
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555440555550000000055555544
00000000555555555555555555555555555555555555555555555555555555555555555555555555566055555555555555555555440555550000000055555544
00000000555555555555555555555555556055555555555555555555555555555555555555555555655660555555555555555555440555550000000055555544
00000000555555555556660555555555565555555555555555555555555555555555555555555555555556055555555555555555440555550000000055555544
00000000555555555565560555555555555555555555555555555555555566055555555555555555555555555555555555555555440555550000000055555544
00000000555555555655556055555555555555555555555555555555555655605555555555555555555555555555555555555555440555550000000055555544
00000000555555555555555555555555555555555555555555555555556555555555555555555555555555555555555555555555440555550000000055555544
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555440555555555555555555544
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555440555555555555556605544
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555440555555555555555560544
00000000555555555555555555555555555666055555555555555555555555555555555555555555555555555555555555555555440555555555555555555544
00000000555555555555555555555555556555605555555555555555555555555556055555555555555555555555555555660555440555555555555555555544
00000000555555555555555555555555555555555555555555555555555555555555660555555555555555555555555556656555440555555555555555555544
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555444444444444444444444444
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555444444444444444444444444
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555000000000000000000000000
00000000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555000000000000000000000000
00000000555555555555555555555555555555555555555555566055555555555555555555555555555555555555555555555555000fff000000000000000000
0000000055605555555555555555555555555555555555555565560555555555555555555555555555555555555555555555555500f0f0f00000000000000000
0000000056560555555555555555555555555555555555555655555555555555555555555555555555556605555555555555555500f0f0f00000000000000000
00000000555555555555555555555555555555555555555555555555555555555555555555555555556655605555555555555555f00f0f0f0000000000000000
000000005555555555555555555555555555555555555555555555555555555555555555555555555655555555555555555555550fffffff0000000000000000
0000000055555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555500fffff00000000000000000
05605605605605440555555555555544000000000000008000000000000000000000000000000000000000000000000000000000000000000000000000000000
05605605605605440555555555555544000000000000080000000000000000000000000000000000000000000000000000000000000000000000000000000000
05005005005005000555555555555500000000000008880000000000000000000000000000000000000000000000000000000000000000000000000000000000
55555555555555555555555555555555000000000008800000000000000000000000000000000000000000000000000000000000000000000000000000000000
55555555555555555555555555555555000000000008880000000000000000000000000000000000000000000000000000000000000000000000000000000000
55555555555555555555555555555555000000000008880000000000000000000000000000000000000000000000000000000000000000000000000000000000
55555555555555555555555555555555000000000080088000000000000000000000000000000000000000000000000000000000000000000000000000000000
55555555555555555555555555555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55555555555555555555555555555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55555555555555555555555555555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55555555555555555555555555555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55555555555555555555555555555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55555555555555555555555555555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54444444444444445444444444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44444444444444444444444444444444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
44056056056056054405555555555555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000000000000000000000001010100000000000000000000000000010001000000000000000000000000000101010000000000000000000000000000000002020404000000000000000000000000020204040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0d0e0e40410e0e0f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1d0102031c051c1f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1d0719142c07071f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1d1c1c07072c0b1f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1d311207191c071f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1d011c1c073a191f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1d2c1c361c1c191f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2d2e2e50512e2e2f000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
